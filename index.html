<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ASCII Video</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Courier New', monospace;
  background-color: #111111;
  color: #ffffff;
  line-height: 1.6;
  padding: 20px;
  min-height: 100vh;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 100vh;
  gap: 20px;
}

h1 {
  color: #791dc9;
  text-align: center;
  margin-bottom: 10px;
  font-size: 2.5rem;
  text-shadow: 0 0 10px rgba(66, 3, 133, 0);
}

.ascii-logo {
  color: #d8b4fe;
  text-align: center;
  font-size: 8px;
  line-height: 1;
  white-space: pre;
}

.buttons {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 15px;
  margin-top: 20px;
}

.btn {
  background: linear-gradient(45deg, #7e22ce, #3b0764);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  cursor: pointer;
  font-family: 'Courier New', monospace;
  font-weight: bold;
}

#videoFile {
  display: none;
}


#ascii {
  display: none;
  background-color: #111111;
  padding: 20px;
  border-radius: 8px;
  max-width: 100%;
  overflow: auto;
  font-size: 8px;
  line-height: 1;
  text-align: center;
  color: #ffffff;
  min-height: 300px;
  white-space: pre;
}

@media (max-width: 768px) {
  .container { padding: 10px; }
  h1 { font-size: 2rem; }
  #ascii { font-size: 6px; padding: 10px; }
}

.title {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}
</style>
</head>
<body>
<div class="container">
  <h1 class="title">ASCII Video</h1>

  <!-- ASCII inicial -->
  <pre class="ascii-logo">
............   .....          ............                        .';loddol:,''.........  ...     .......',,,,,,,,,,,,
............    ...            ...........        .......         .,oOKXXXK0ko;'..                 ........',,;;;;;;;;::
...........    ..             ...........       ..;cllc:,.        .;dOKXK0kl;.                           ..',;:cccllllcc
...........    .             ..........         .;okkkdc;..       .':lddoc,.                            ...;loddddddolcc
...........                 .........           .,lxxxl;'.          .....                           ....';lk00Okxdolc::;
..........                  .......              ..',,'..                                         ..',:looxOOkxol:;,,''.
..........  ...            .......                                             ...','...     .....',;cclc:;:cc;,'''.....
..........  ....           ......                                            .,lxkkOkxl;.......,,,,;;,,'.....'..........
...........   ..          ......                                .....       .;kKXXXK0kd:'.....';:;'....    .............
,'.........     ..       ......             ..','.             ,lxxd:.      .;kKXXXKko:,............        ............
,,;,.......              .....            .,loxxdc'           'd0KK0o'.      .:dkOkdc,......     ..         ............
',;;;;'...  .       ..   .....            .cxkkkxl'.          .cxkkd:.         ..''...                      ............
'',,;::;,...        .. ......             .'::clc;'.......     ..''..                                       ............
..'';:::::;'..       .........              ...'...........                       .                          ...........
.'''',:ccccc:,..      ........               ....    .......                  .,:lc;..                        ..........
...'''',:cllllc:'..  ..........                        .......    .....      .lk00Odc'.                        .........
.....',,',;cloool:,..............                         .':'..'......      .cdkOkxo:'..                      ..'''....
:;'....',,'',:cloool:,............                         .. .......        ...';;,'..                         .,,,,'..
cllc;.....',,,,,;cloool;'...........                          ...                                         .     .';;,,''
  </pre>

  <div class="buttons" class="title">
    <button id="chooseFileBtn" class="btn">Choose Video</button>
    <input type="file" id="videoFile" accept="video/*">
  </div>

  
  <pre id="ascii"></pre>
</div>

<script>
const chars = "@%#*+=-:. "; 
const fileInput = document.getElementById('videoFile');
const button = document.getElementById('chooseFileBtn');
const asciiEl = document.getElementById('ascii');

button.addEventListener('click', () => fileInput.click());

fileInput.addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (!file) return;

  const video = document.createElement('video');
  video.src = URL.createObjectURL(file);
  video.muted = true;
  video.loop = true;

  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');

  video.addEventListener('loadedmetadata', function() {
    canvas.width = 80;
    canvas.height = video.videoHeight / video.videoWidth * canvas.width;

    
    asciiEl.style.display = 'flex';
    video.play();
    drawFrame();
  });

  function drawFrame() {
    if(video.paused || video.ended) return;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    const frame = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
    let ascii = "";
    for(let y = 0; y < canvas.height; y++) {
      for(let x = 0; x < canvas.width; x++) {
        const offset = (y * canvas.width + x) * 4;
        const r = frame[offset], g = frame[offset+1], b = frame[offset+2];
        const brightness = (r + g + b) / 3;
        const charIndex = Math.floor(brightness / 256 * chars.length);
        ascii += chars[charIndex];
      }
      ascii += "\n";
    }
    asciiEl.textContent = ascii;
    requestAnimationFrame(drawFrame);
  }
});
</script>
</body>
</html>
